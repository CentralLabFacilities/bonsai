

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skills &mdash; Bonsai Docs 0.8-SNAPSHOT documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=f06a32cd" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=f06a32cd" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=3242a324"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Bonsai Configuration" href="config.html" />
    <link rel="prev" title="Memory Slots" href="memory.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Bonsai Docs
              <img src="../_static/bonsai-l1s.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">QuickStart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../general.html">Bonsai</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="datatypes.html">Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensor_actuator.html">Sensors and Actuators</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">Memory Slots</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Skills</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#skillconfigurator">SkillConfigurator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exittoken">ExitToken</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Bonsai Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../behavior.html">SCXML Behavior Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bonsai Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../general.html">Bonsai - Bielefeld Sensor Actuator Interface</a></li>
      <li class="breadcrumb-item active">Skills</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="skills">
<span id="section-skills"></span><h1>Skills<a class="headerlink" href="#skills" title="Link to this heading"></a></h1>
<div class="quote docutils container">
<p>“A skill describes a combinable and reusable stateful building block of a robot behavior that covers one desired outcome (minimal) by only facilitating the frameworks sensors and actuators.”</p>
</div>
<p>Skills execute code using <a class="reference internal" href="sensor_actuator.html#section-sensor"><span class="std std-ref">sensors</span></a> and <a class="reference internal" href="sensor_actuator.html#section-actuator"><span class="std std-ref">actuators</span></a> and finish with one defined <a class="reference internal" href="#section-exit-token"><span class="std std-ref">ExitStatus</span></a>.
They can use additional input/output with <a class="reference internal" href="memory.html#section-memory"><span class="std std-ref">slots</span></a>.
Furthermore, <span class="xref std std-ref">parameters</span> can be directly provided via the SCXML state machine.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Sensors, Actuators, Slots, and parameters all can be requested through the <a class="reference internal" href="#section-skill-configurator"><span class="std std-ref">SkillConfigurator</span></a>.</p></li>
<li><p>Sensors and Actuators are defined in the <a class="reference internal" href="config.html#section-config"><span class="std std-ref">Bonsai config</span></a>.</p></li>
<li><p>Slot definitions and Parameters are configured inside the <a class="reference internal" href="../behavior.html#section-scxml"><span class="std std-ref">behavior modelling</span></a>.</p></li>
</ul>
</div>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading"></a></h2>
<p>Each skill <em>must</em> contain the following functions:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Skill Functions</span><a class="headerlink" href="#id1" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 60.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Explanation</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>configure()</p></td>
<td><div class="line-block">
<div class="line">Configures the Sensor and Actuator</div>
<div class="line">from the Bonsai config  and slots and</div>
<div class="line">parameters from the behavior model.</div>
</div>
</td>
<td><div class="line-block">
<div class="line">For more infos on skill configurations</div>
<div class="line">see <a class="reference internal" href="#section-skill-configurator"><span class="std std-ref">here</span></a>.</div>
<div class="line">The skill stops if configure throws and</div>
<div class="line">exception</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>init()</p></td>
<td><div class="line-block">
<div class="line">init() initalizes the skill and should be used as</div>
<div class="line">a place to define your pre nonlogic structures</div>
</div>
</td>
<td><div class="line-block">
<div class="line">If init returns false, the execute method is</div>
<div class="line">skipped, <code class="docutils literal notranslate"><span class="pre">end(Token.Fatal())</span></code> is then called</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>execute()</p></td>
<td><div class="line-block">
<div class="line">Gather data from sensors and slots and do</div>
<div class="line">some actions (possibly with actuators).</div>
<div class="line">The execute function is repeatedly called</div>
<div class="line">(returns Loop-Token) until a non loop token</div>
<div class="line">is returned</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Actuators usually return a Future object.</div>
<div class="line">The execute function should wait until the</div>
<div class="line">action is done and we can get a result from</div>
<div class="line">the Future object.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>end()</p></td>
<td><p>End the skill.</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>The Skill methods gets invoked in the following order</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">configure</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">end</span>
</pre></div>
</div>
</section>
<section id="skillconfigurator">
<span id="section-skill-configurator"></span><h2>SkillConfigurator<a class="headerlink" href="#skillconfigurator" title="Link to this heading"></a></h2>
<p>Skills utilize the <code class="docutils literal notranslate"><span class="pre">SkillConfigurator</span></code>. It enables the skill to get:</p>
<blockquote>
<div><ul class="simple">
<li><p>Parameters from the <a class="reference internal" href="../behavior/example/parameter.html#section-parameters-scxml"><span class="std std-ref">robotic behavior code</span></a></p></li>
<li><p>Memory slot configuration from the <a class="reference internal" href="../behavior/example/memory-slots.html#section-memory-scxml"><span class="std std-ref">robotic behavior code</span></a></p></li>
<li><p>Actuators and Sensors from the Bonsai config</p></li>
</ul>
</div></blockquote>
<p>They all can be requested by the configurator using a <strong>specified key</strong>.
The parameter functions and memory slot keys are defined within the skill and configured in the <a class="reference internal" href="../behavior/example/parameter.html#section-parameters-scxml"><span class="std std-ref">robotic behavior code</span></a>.
The actuator and sensor, however, get their configurations from the <strong>Bonsai config</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on how and where the SkillConfigurator gets the configuration, look up the section <a class="reference internal" href="#section-skill-configurator"><span class="std std-ref">SkillConfigurator</span></a>.</p>
</div>
<p>Configure is already called before during load, therefore errors can be handled before execution.</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">SkillConfigurator Functions</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>requestValue(String key)</p></td>
<td><div class="line-block">
<div class="line">From the behavior model, request the parameter</div>
<div class="line">with key and cast it to a String</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>requestOptionalValue(String key, String default)</p></td>
<td><div class="line-block">
<div class="line">From the behavior model, request the parameter</div>
<div class="line">with key and cast it to a String. If the parameter</div>
<div class="line">has not been declared in the configuration file,</div>
<div class="line">then use the default value. The getOptional</div>
<div class="line">functions are also available for the other types below.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">requestInt(String key)</div>
<div class="line">requestOptionalInt(String key, int default)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">From the behavior model, request the parameter</div>
<div class="line">with key and cast it to an int</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">requestDouble(String key)</div>
<div class="line">requestOptionalDouble(String key, double default)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">From the behavior model, request the parameter</div>
<div class="line">with key and cast it to a double</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">requestBoolean(String key)</div>
<div class="line">requestOptionalBoolean(String key, boolean default)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">From the behavior model, request the parameter</div>
<div class="line">with key and cast it to Boolean</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">getReadSlot(String key)</div>
<div class="line">getWriteSlot(String key)</div>
<div class="line">getReadWriteSlot(String key)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Request <a class="reference internal" href="memory.html#section-memory"><span class="std std-ref">memory slot</span></a> with specified key.</div>
<div class="line">The <a class="reference internal" href="../behavior/example/memory-slots.html#section-memory-scxml"><span class="std std-ref">robotic behavior code</span></a> has to provide the other configurations needed.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>getSensor(String key, DataType T)</p></td>
<td><div class="line-block">
<div class="line">Provides the <a class="reference internal" href="sensor_actuator.html#section-sensor"><span class="std std-ref">Sensor</span></a> with the specified key</div>
<div class="line">from the <strong>Bonsai config</strong>. The sensor will return</div>
<div class="line">data of the specified type T.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>getActuator(String key, InterfaceClass T)</p></td>
<td><div class="line-block">
<div class="line">Provides <a class="reference internal" href="sensor_actuator.html#section-actuator"><span class="std std-ref">Actuator</span></a> with specified key from the</div>
<div class="line"><strong>Bonsai config</strong> and cast it to the</div>
<div class="line">interface class.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>requestExitToken(ExitStatus exitStatus)</p></td>
<td><div class="line-block">
<div class="line">Request an <a class="reference internal" href="#section-exit-token"><span class="std std-ref">ExitToken</span></a></div>
<div class="line">No configurations needed to get the ExitTokens.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even though some function names for the <a class="reference internal" href="sensor_actuator.html#section-object-configurator"><span class="std std-ref">ObjectConfigurator</span></a> and the <code class="docutils literal notranslate"><span class="pre">SkillConfigurator</span></code> are the same,
when requesting values, int, doubles, or booleans, the <code class="docutils literal notranslate"><span class="pre">SkillConfigurator</span></code> searches for the key inside the robotic behavior code (SCXML)
and not in the Bonsai config ( as is done by the <code class="docutils literal notranslate"><span class="pre">ObjectConfigurator</span></code>).</p>
<p><strong>They are the parameters that can be provided to a skill through the SCXML and not the Bonsai configuration.</strong></p>
</div>
<p>Let’s assume we have the following configuration of actuators and sensors in the <strong>Bonsai configuration file</strong>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- ACTUATORS --&gt;</span>
<span class="nt">&lt;Actuator</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;Example1&quot;</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Options&gt;</span>
<span class="w">        </span><span class="nt">&lt;Option</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;topic&quot;</span><span class="nt">&gt;</span>/example<span class="nt">&lt;/Option&gt;</span>
<span class="w">        </span><span class="nt">&lt;Option</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;optional_int&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/Option&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Options&gt;</span>
<span class="nt">&lt;/Actuator&gt;</span>

<span class="cm">&lt;!-- SENSORS --&gt;</span>
<span class="nt">&lt;Sensor</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;Example2&quot;</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">    </span>...
<span class="nt">&lt;/Sensor&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">configure</span></code> function in the example skill below gets the <code class="docutils literal notranslate"><span class="pre">SkillConfigurator</span></code> as parameter.
With this it can request the sensors, actuators, parameters, slots and ExitTokens.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">...</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ExampleActuatorInterface</span><span class="p">;</span><span class="w">    </span><span class="c1">// import the Actuator interfaces you want to use</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">SensorType</span><span class="p">;</span><span class="w">                  </span><span class="c1">// import the DataType returned by the Sensor</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExampleSkill</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">AbstractSkill</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// define here the keys of everything we want to get from the configurator</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">KEY_ACTUATOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Example1&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">KEY_SENSOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Example2&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">KEY_STRING_PARAMETER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;StringParam&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">KEY_INT_PARAMETER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;IntParam&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">KEY_SLOT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;StringSlot&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Declare the Actuators, Sensors, Slots and parameters</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ExampleActuatorInterface</span><span class="w"> </span><span class="n">actuator</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ExampleSensorInterface</span><span class="w"> </span><span class="n">sensor</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">paramName</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">optValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Slot</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">slot</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    * This function uses the Skillconfigurator to get the configured objects and initialize everything</span>
<span class="cm">    * that has been declared above</span>
<span class="cm">    */</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">ISkillConfigurator</span><span class="w"> </span><span class="n">conf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">actuator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conf</span><span class="p">.</span><span class="na">getActuator</span><span class="p">(</span><span class="n">KEY_ACTUATOR</span><span class="p">,</span><span class="w"> </span><span class="n">ExampleActuatorInterface</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">    </span><span class="c1">// returns ExampleActuator class</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">sensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conf</span><span class="p">.</span><span class="na">getSensor</span><span class="p">(</span><span class="n">KEY_SENSOR</span><span class="p">,</span><span class="w"> </span><span class="n">DataType</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">          </span><span class="c1">// returns ExampleSensor class</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">paramName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conf</span><span class="p">.</span><span class="na">getValue</span><span class="p">(</span><span class="n">KEY_STRING_PARAMETER</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">optValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conf</span><span class="p">.</span><span class="na">getOptionalInt</span><span class="p">(</span><span class="n">KEY_INT_PARAMETER</span><span class="p">,</span><span class="w"> </span><span class="n">parameter2</span><span class="p">);</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">slot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conf</span><span class="p">.</span><span class="na">getReadWriteSlot</span><span class="p">(</span><span class="n">KEY_SLOT</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">...</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The options and memory slots that a skill can request from the configurator are not defined in the Bonsai configs, but should be set within the code of the <a class="reference internal" href="../behavior.html#section-scxml"><span class="std std-ref">robotic behavior</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is good manner to initialize the keys for each object to be requested as class variables.
This way, you can directly see the keys that you want to configure in your SCXML or Bonsai configuration.</p>
</div>
</section>
<section id="exittoken">
<span id="section-exit-token"></span><h2>ExitToken<a class="headerlink" href="#exittoken" title="Link to this heading"></a></h2>
<p>ExitToken are used to create events after the skill is finished. To make sure all possible exit events are captured in the scxml the tokens have to be requested in the configuration method.</p>
<p>There exist three ExitTokens:</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">ExitToken Types</span><a class="headerlink" href="#id3" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ExitToken</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ExitStatus.SUCCESS()</span></code></p></td>
<td><p>Is used when skill ended successfully.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ExitStatus.ERROR()</span></code></p></td>
<td><div class="line-block">
<div class="line">An error or something unexpected occurred while trying</div>
<div class="line">to execute the skill.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ExitStatus.FATAL()</span></code></p></td>
<td><div class="line-block">
<div class="line">The skill could not be configured and is not running.</div>
<div class="line">Usually, you won’t need this one since the init()</div>
<div class="line">already sends the FATAL token if something went wrong.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ExitStatus.LOOP()</span></code></p></td>
<td><div class="line-block">
<div class="line">When execute() returns the Loop token, it will re-run the</div>
<div class="line">execute() function until one of the other tokens is returned.</div>
<div class="line">Useful when one awaits the result from a Future object.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Usually you should only need to request the success and error token.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FATAL</span></code> and <code class="docutils literal notranslate"><span class="pre">LOOP</span></code> tokens can always be used without registering</p></li>
</ul>
</div>
<p>ExitTokens can be requested from the configurator:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">SkillConfigurator</span><span class="w"> </span><span class="n">configurator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// request all tokens that you plan to return from other methods</span>
<span class="w">    </span><span class="n">tokenSuccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">configurator</span><span class="p">.</span><span class="na">requestExitToken</span><span class="p">(</span><span class="n">ExitStatus</span><span class="p">.</span><span class="na">SUCCESS</span><span class="p">());</span>
<span class="w">    </span><span class="n">tokenError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">configurator</span><span class="p">.</span><span class="na">requestExitToken</span><span class="p">(</span><span class="n">ExitStatus</span><span class="p">.</span><span class="na">ERROR</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sometimes, we need more refined ExitTokens.
For that case we can append the tokens with a status.
Let’s take a skill that detects objects as an example.
The skill can run successfully. However, which can mean it detected no objects or at least one object.
To distinguish this case, we can do the following:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">SkillConfigurator</span><span class="w"> </span><span class="n">configurator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// request all tokens that you plan to return from other methods</span>
<span class="w">    </span><span class="n">tokenSuccessNoObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">configurator</span><span class="p">.</span><span class="na">requestExitToken</span><span class="p">(</span><span class="n">ExitStatus</span><span class="p">.</span><span class="na">SUCCESS</span><span class="p">().</span><span class="na">withProcessingStatus</span><span class="p">(</span><span class="s">&quot;no_obj&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">tokenSuccessDetected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">configurator</span><span class="p">.</span><span class="na">requestExitToken</span><span class="p">(</span><span class="n">ExitStatus</span><span class="p">.</span><span class="na">SUCCESS</span><span class="p">().</span><span class="na">withProcessingStatus</span><span class="p">(</span><span class="s">&quot;detected&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For each ExitToken, you should make sure that either <strong>ALL</strong> or <strong>NONE</strong> of that exit tokens have a ps.
Don’t define e.g. <code class="docutils literal notranslate"><span class="pre">ExitToken.SUCCESS()</span></code> without a ps when you already have defined <code class="docutils literal notranslate"><span class="pre">ExitToken.SUCCESS().ps(&quot;example&quot;)</span></code></p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="memory.html" class="btn btn-neutral float-left" title="Memory Slots" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="config.html" class="btn btn-neutral float-right" title="Bonsai Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Team of Bielefeld.
      <span class="lastupdated">Last updated on Oct 28, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>