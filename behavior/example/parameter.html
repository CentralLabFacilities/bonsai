<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Parameters and Variables &mdash; Bonsai Docs 0.7-SNAPSHOT documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=b90832ea"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Memory Slots" href="memory-slots.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Bonsai Docs
              <img src="../../_static/bonsai-l1s.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">QuickStart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general.html">Bonsai</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../behavior.html">SCXML Behavior Engine</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../scxml-intro.html">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html">Statemachine Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="scxml-skills.html">Integrate Skills in the State Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="scxml-transition.html">Transitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory-slots.html">Memory Slots</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Parameters and Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scxml-variables">SCXML Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#on-entry-exit">On Entry/Exit</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Bonsai Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../behavior.html">Bonsai - SCXML</a></li>
          <li class="breadcrumb-item"><a href="../scxml-examples.html">&lt;no title&gt;</a></li>
      <li class="breadcrumb-item active">Parameters and Variables</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="parameters-and-variables">
<h1>Parameters and Variables<a class="headerlink" href="#parameters-and-variables" title="Link to this heading"></a></h1>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading"></a></h2>
<p>Some skills require further parameters that you don’t necessarily want to write in a slot.
For that case, the state machine enables propagating parameters to the skill.</p>
<p>For example, the skill ParameterHaver defines two parameters “value” and “optional”:</p>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">ParameterHaver</span> <span class="p">:</span> <span class="n">AbstractSkill</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">var</span> <span class="nv">value</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="kd">private</span> <span class="kd">var</span> <span class="nv">optional</span> <span class="o">=</span> <span class="kc">false</span>

    <span class="c1">//...</span>

    <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">configure</span><span class="p">(</span><span class="n">configurator</span><span class="p">:</span> <span class="n">ISkillConfigurator</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">configurator</span><span class="p">.</span><span class="na">requestValue</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">optional</span> <span class="o">=</span> <span class="n">configurator</span><span class="p">.</span><span class="na">requestOptionalBool</span><span class="p">(</span><span class="s">&quot;option&quot;</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each Parameters needs to be requested by the configurator.
The “optional” parameter here is an optional bool value.</p>
<p>When we are using this skill in the state machine, we can provide the skill with these parameters.
The parameter “value” <em>must</em> be provided in the state machine. The parameters have to be set in a <code class="docutils literal notranslate"><span class="pre">datamodel/data</span></code> <strong>within</strong> the state:
The <code class="docutils literal notranslate"><span class="pre">expr</span></code> value is <em>read as string</em> by the skill. Remember to use additional singlequotes.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;state</span> <span class="na">id=</span><span class="s">&quot;example.ParameterHaver&quot;</span><span class="nt">&gt;</span>
    <span class="cm">&lt;!-- skill parameter are read from the state datamodel --&gt;</span>
    <span class="nt">&lt;datamodel&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">id=</span><span class="s">&quot;value&quot;</span> <span class="na">expr=</span><span class="s">&quot;&#39;Hello&#39;&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/datamodel&gt;</span>
    <span class="nt">&lt;transition</span> <span class="na">event=</span><span class="s">&quot;ParameterHaver.*&quot;</span> <span class="na">target=</span><span class="s">&quot;example.ParameterHaver#option&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/state&gt;</span>

<span class="nt">&lt;state</span> <span class="na">id=</span><span class="s">&quot;example.ParameterHaver#option&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;datamodel&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">id=</span><span class="s">&quot;value&quot;</span> <span class="na">expr=</span><span class="s">&quot;&#39;World&#39;&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">id=</span><span class="s">&quot;option&quot;</span> <span class="na">expr=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/datamodel&gt;</span>
    <span class="nt">&lt;transition</span> <span class="na">event=</span><span class="s">&quot;ParameterHaver.*&quot;</span> <span class="na">target=</span><span class="s">&quot;End&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/state&gt;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure to use extra quotes for strings! <code class="docutils literal notranslate"><span class="pre">&lt;data</span> <span class="pre">id=&quot;value&quot;</span> <span class="pre">expr=&quot;'Hello'&quot;/&gt;</span></code>.
Booleans and numbers do not need the extra quotes.</p>
</div>
</section>
<section id="scxml-variables">
<h2>SCXML Variables<a class="headerlink" href="#scxml-variables" title="Link to this heading"></a></h2>
<p>SCXML Variables should not be specific for each state but rather for the whole state machine. As such, they are defined in the datamodel of the state machine:
To use SCXML Variables as parameters we need to mark them with <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;scxml</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2005/07/scxml&quot;</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span> <span class="na">initial=</span><span class="s">&quot;example.ParameterHaver&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;datamodel&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">id=</span><span class="s">&quot;hellosToSpeak&quot;</span> <span class="na">expr=</span><span class="s">&quot;3&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/datamodel&gt;</span>

    <span class="nt">&lt;state</span> <span class="na">id=</span><span class="s">&quot;example.ParameterHaver&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;datamodel&gt;</span>
            <span class="nt">&lt;data</span> <span class="na">id=</span><span class="s">&quot;value&quot;</span> <span class="na">expr=</span><span class="s">&quot;&#39;@hellosToSpeak&#39;&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/datamodel&gt;</span>
        <span class="nt">&lt;transition</span> <span class="na">event=</span><span class="s">&quot;ParameterHaver.*&quot;</span> <span class="na">target=</span><span class="s">&quot;End&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/state&gt;</span>
<span class="nt">&lt;/scxml&gt;</span>
</pre></div>
</div>
<p>The ParameterHaver skill gets the “hellosToSpeak” variable assigned as parameter.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since the “expression” is read as a string, we need to add singlequotes and <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> or scxml may try to evaluate the expression as jexl:
<code class="docutils literal notranslate"><span class="pre">&lt;data</span> <span class="pre">id=&quot;value&quot;</span> <span class="pre">expr=&quot;'&#64;hellosToSpeak'&quot;/&gt;</span></code></p>
</div>
<p>During transitions we can execute SCXML actions.
The scxml variables can be changed by assigning them a new value using the “assign” action:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;scxml</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2005/07/scxml&quot;</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span> <span class="na">initial=</span><span class="s">&quot;example.ParameterHaver&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;datamodel&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">id=</span><span class="s">&quot;hellosToSpeak&quot;</span> <span class="na">expr=</span><span class="s">&quot;3&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/datamodel&gt;</span>

    <span class="nt">&lt;state</span> <span class="na">id=</span><span class="s">&quot;example.ParameterHaver&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;datamodel&gt;</span>
            <span class="nt">&lt;data</span> <span class="na">id=</span><span class="s">&quot;value&quot;</span> <span class="na">expr=</span><span class="s">&quot;&#39;Hello&#39;&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/datamodel&gt;</span>
        <span class="nt">&lt;transition</span> <span class="na">event=</span><span class="s">&quot;ParameterHaver.*&quot;</span> <span class="na">target=</span><span class="s">&quot;example.ParameterHaver&quot;</span> <span class="nt">&gt;</span>
            <span class="nt">&lt;assign</span> <span class="na">location=</span><span class="s">&quot;hellosToSpeak&quot;</span> <span class="na">expr=</span><span class="s">&quot;hellosToSpeak - 1&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/transition&gt;</span>
    <span class="nt">&lt;/state&gt;</span>
<span class="nt">&lt;/scxml&gt;</span>
</pre></div>
</div>
<p>With variables, we also can introduce conditions in transitions. For example, as long as “hellosToSpeak” is greater than 1, we want ParameterHaver to be executed again.
This can be done by adding <code class="docutils literal notranslate"><span class="pre">cond=&quot;hellosToSpeak</span> <span class="pre">&gt;</span> <span class="pre">1&quot;</span></code> in the transition. Another transition without any conditions is then defined at the end:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;state</span> <span class="na">id=</span><span class="s">&quot;example.ParameterHaver&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;datamodel&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">id=</span><span class="s">&quot;value&quot;</span> <span class="na">expr=</span><span class="s">&quot;&#39;Hello&#39;&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/datamodel&gt;</span>

    <span class="nt">&lt;transition</span> <span class="na">event=</span><span class="s">&quot;ParameterHaver.*&quot;</span> <span class="na">cond=</span><span class="s">&quot;hellosToSpeak &gt; 1&quot;</span> <span class="na">target=</span><span class="s">&quot;example.ParameterHaver&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;assign</span> <span class="na">location=</span><span class="s">&quot;hellosToSpeak&quot;</span> <span class="na">expr=</span><span class="s">&quot;hellosToSpeak - 1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/transition&gt;</span>
    <span class="nt">&lt;transition</span> <span class="na">event=</span><span class="s">&quot;ParameterHaver.*&quot;</span> <span class="na">target=</span><span class="s">&quot;End&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/state&gt;</span>
</pre></div>
</div>
</section>
<section id="on-entry-exit">
<h2>On Entry/Exit<a class="headerlink" href="#on-entry-exit" title="Link to this heading"></a></h2>
<p>We can also use the on_entry/on_exit actions of the state to assign some values to a variable.
The on_entry action here decrements the “hellosToSpeak” variable each time the state machine transitions back to the state:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;state</span> <span class="na">id=</span><span class="s">&quot;example.ParameterHaver&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;datamodel&gt;</span>
        <span class="nt">&lt;data</span> <span class="na">id=</span><span class="s">&quot;value&quot;</span> <span class="na">expr=</span><span class="s">&quot;&#39;Hello&#39;&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/datamodel&gt;</span>

    <span class="nt">&lt;onentry&gt;</span>
        <span class="nt">&lt;assign</span> <span class="na">location=</span><span class="s">&quot;hellosToSpeak&quot;</span> <span class="na">expr=</span><span class="s">&quot;hellosToSpeak - 1&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/onentry&gt;</span>

    <span class="nt">&lt;transition</span> <span class="na">event=</span><span class="s">&quot;ParameterHaver.*&quot;</span> <span class="na">cond=</span><span class="s">&quot;hellosToSpeak &gt; 0&quot;</span> <span class="na">target=</span><span class="s">&quot;example.ParameterHaver&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;transition</span> <span class="na">event=</span><span class="s">&quot;ParameterHaver.*&quot;</span> <span class="na">target=</span><span class="s">&quot;End&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/state&gt;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="memory-slots.html" class="btn btn-neutral float-left" title="Memory Slots" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Leroy Rügemer.
      <span class="lastupdated">Last updated on Jun 10, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>